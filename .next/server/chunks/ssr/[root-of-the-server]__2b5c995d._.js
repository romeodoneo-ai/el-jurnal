module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},71106,a=>{"use strict";function b(){return null}function c(a){}async function d(a){let c=b();if(!c?.scriptUrl)return{success:!1,message:"Синхронизация не настроена"};try{let b=new URLSearchParams;b.append("action","saveAttendance"),b.append("pin",c.pin),b.append("data",JSON.stringify(a));let d=await fetch(c.scriptUrl,{method:"POST",body:b,redirect:"follow"});if(d.ok){let a=await d.json();return{success:!0,message:a.message||"Сохранено в Google Sheets"}}return{success:!0,message:"Данные отправлены"}}catch{return{success:!0,message:"Данные отправлены в Google Sheets"}}}a.s(["getSyncSettings",()=>b,"saveSyncSettings",()=>c,"syncSaveAttendance",()=>d])},20788,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(71106),e=a.i(38246);function f(){let[a,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)("");return(0,c.useEffect)(()=>{let a=(0,d.getSyncSettings)();a&&(f(a.scriptUrl),h(a.pin));try{let a=localStorage.getItem("el-jurnal-attendance");if(a){let b=new Blob([a]).size;b<1024?l(`${b} B`):l(`${(b/1024).toFixed(1)} KB`)}else l("0 B")}catch{l("N/A")}},[]),(0,b.jsxs)("div",{className:"max-w-lg mx-auto pb-8",children:[(0,b.jsx)("header",{className:"bg-blue-500 text-white px-4 py-3 sticky top-0 z-50 shadow-md",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(e.default,{href:"/",className:"text-sm bg-white/20 px-3 py-1.5 rounded-lg",children:"← Назад"}),(0,b.jsx)("h1",{className:"text-lg font-bold",children:"Настройки"}),(0,b.jsx)("div",{className:"w-16"})]})}),(0,b.jsxs)("div",{className:"px-4 py-4 bg-white border-b border-gray-100",children:[(0,b.jsx)("h2",{className:"text-sm font-bold text-gray-700 mb-3",children:"Синхронизация с Google Sheets"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mb-3",children:"Вставьте URL из Google Apps Script для автоматической записи в таблицу"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-gray-500 block mb-1",children:"URL скрипта"}),(0,b.jsx)("input",{type:"url",value:a,onChange:a=>f(a.target.value),placeholder:"https://script.google.com/macros/s/...",className:"w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-gray-500 block mb-1",children:"PIN"}),(0,b.jsx)("input",{type:"text",value:g,onChange:a=>h(a.target.value),placeholder:"1234",className:"w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-300"})]}),(0,b.jsx)("button",{onClick:()=>{(0,d.saveSyncSettings)({scriptUrl:a,pin:g}),j(!0),setTimeout(()=>j(!1),2e3)},className:`w-full py-2.5 rounded-xl font-medium text-sm transition-all ${i?"bg-emerald-500 text-white":"bg-blue-500 text-white"}`,children:i?"Сохранено!":"Сохранить настройки"})]})]}),(0,b.jsxs)("div",{className:"px-4 py-4 bg-white border-b border-gray-100",children:[(0,b.jsx)("h2",{className:"text-sm font-bold text-gray-700 mb-3",children:"Данные"}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mb-3",children:["Размер данных: ",(0,b.jsx)("span",{className:"font-medium text-gray-600",children:k})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("button",{onClick:()=>{try{let a=localStorage.getItem("el-jurnal-attendance")||"{}",b=new Blob([a],{type:"application/json"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`jurnal-backup-${new Date().toISOString().slice(0,10)}.json`,d.click(),URL.revokeObjectURL(c)}catch(a){alert("Ошибка экспорта: "+a)}},className:"w-full py-2.5 rounded-xl font-medium text-sm bg-gray-100 text-gray-700",children:"Экспорт (JSON backup)"}),(0,b.jsx)("button",{onClick:()=>{let a=document.createElement("input");a.type="file",a.accept=".json",a.onchange=a=>{let b=a.target.files?.[0];if(!b)return;let c=new FileReader;c.onload=a=>{try{let b=JSON.parse(a.target?.result);localStorage.setItem("el-jurnal-attendance",JSON.stringify(b)),alert("Данные импортированы!"),window.location.reload()}catch{alert("Ошибка: неверный формат файла")}},c.readAsText(b)},a.click()},className:"w-full py-2.5 rounded-xl font-medium text-sm bg-gray-100 text-gray-700",children:"Импорт из файла"}),(0,b.jsx)("button",{onClick:()=>{confirm("Удалить ВСЕ данные посещаемости? Это действие необратимо!")&&(localStorage.removeItem("el-jurnal-attendance"),alert("Данные удалены"),window.location.reload())},className:"w-full py-2.5 rounded-xl font-medium text-sm bg-red-50 text-red-600",children:"Удалить все данные"})]})]}),(0,b.jsxs)("div",{className:"px-4 py-4 text-center text-xs text-gray-400",children:[(0,b.jsx)("p",{children:"Журнал посещаемости v1.0"}),(0,b.jsx)("p",{className:"mt-1",children:"Данные хранятся в браузере телефона"})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2b5c995d._.js.map